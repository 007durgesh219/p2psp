source_port=$1

if [ -z $source_port ]; then echo "Missing listening port (4552, for example)"; exit; fi

~/p2psp/source.py -l $source_port -s localhost:4551 -c 134.ogg &

superpeer_port=$[$source_port+1]

echo "Super-peer port = " $superpeer_port

# A super-peer
~/p2psp/peer.py -s localhost:$source_port -l 9998 -p $superpeer_port > /dev/null &

sleep 1

# Super-peer's client
netcat localhost 9998 > /dev/null &
